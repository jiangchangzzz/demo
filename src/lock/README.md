# 手势密码

## 1.画布的实现
画布主要通过html5中的canvas元素的相关API来实现，我将画布的功能封装成了Lock引用类型，主要要实现的功能点有：

- **画布初始化时计算出九个点的位置（createPoint）**。这个主要通过读取画布的宽度，按照一定的比例计算出每个空心圈的半径和它们之间的间隔，然后计算出每个圈在画布中的坐标，按从左到右的顺序将其编号0-8，并保存在成员变量points中。

- **绘制九个点的位置(drawPoint)**。九个点可能是空心圈或者实心球，因此分别用成员变量circles保存空心圈的序号，成员变量balls保存实心球的序号，分别根据points中保存的坐标进行绘制。

- **绘制线条(drawLine)**。首先，需要按顺序将balls中保存的实心球的圆心连接起来，然后再与传入的当前触碰位置连接起来，进行一个实时的绘制。

- **检查当前触碰点是否在未选择的空心圈内(checkCircle)**。只要当前触碰点距离每个circles中圆心的距离小于半径即可，考虑到需要给用户一个更大的触碰有效范围，所以这里只要在空心圈的外部矩形内，就判定触碰点在空心圈内。

- **辅助方法**。
    - init方法可以初始化画布，绘制出九个空心圈。
    - update方法可以实时地绘制出空心圈和实心球，以及相应路径。
    - clear方法可以清空画布。
    - getPassword可以从balls数组中读取出密码。

# 2.业务逻辑的实现
1. 根据浏览器视口的大小确定出画布的宽度和高度，这里设置画布的宽度和高度相等。
2. 使用status变量保存当前状态，一共三种状态，firstSet：第一次设置密码,secondSet：第二次设置密码,check：检验密码。
3. 在touchstart事件处理程序中设置当前进入绘制状态，即设置drawing为true。
4. 在touchmove事件处理程序中，根据当前触碰点位置，实时地重绘画布。
5. 在touchend是加紧处理程序中，根据当前状态判定：
    - 第一次设置密码：检查密码长度是否大于5个点，符合则进入第二次设置密码状态，不符合则提示用户重新输入
    - 第二次设置密码：检查密码是否与上一次保存的相同，符合则将密码存入localStorage中，并进入第一次设置密码状态，不符合则提示用户重新输入
    - 检验密码：检查密码是否与localStorage中保存的相同，符合则提示验证成功，不符合则提示用户重新输入。

# 3.移动网页布局的实现
1. 将页面窗口自动调整到设备宽度，并禁止用户缩放页面。
2. 为了适应各种移动设备，首先根据媒体查询对不同的窗口采用不同的字体尺寸，页面的尺寸都用rem作为单位。
3. 让画布部分宽度根据窗口大小进行调整，并设置整体高度为100%以铺满整个屏幕。
4. 使用flex布局，让下面设置密码和验证密码选项处于剩余部分的垂直和水平居中位置，以适应不同的移动设备。

# 4.移动设备测试
- chorme浏览器上各种手机模拟器中，布局正确，功能实现正确
- iPhone7plus上UC浏览器和Safari浏览器中，布局正确，功能实现正确
